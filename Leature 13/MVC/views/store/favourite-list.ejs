<%- include('../partials/head') %>
  </head>

  <body>
    <%- include('../partials/nav') %>
      <main class="container mx-auto bg-white shadow-lg rounded-lg p-8 mt-10 max-w-6xl px-4 sm:px-6">
        <h2 class="text-3xl md:text-4xl text-red-500 font-bold text-center mb-8 tracking-tight">
          Here are our registered homes:
        </h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
          <% registeredHomes.forEach(home=> { %>
            <div
              class="group bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-300 w-full max-w-sm hover:-translate-y-1 ring-1 ring-gray-100 hover:ring-red-200">
              <img src="<%= home.photoUrl %>" alt="<%= home.houseName %>"
                class="w-full h-52 sm:h-56 object-cover transition group-hover:opacity-95"
                onerror="this.src='https://images.unsplash.com/photo-1564013799919-ab600027ffc6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80'">
              <div class="p-5">
                <h3 class="text-xl font-semibold text-gray-800 mb-2 truncate">
                  <%= home.houseName %>
                </h3>
                <p class="text-gray-600 mb-3 truncate"><i class="fas fa-map-marker-alt mr-2"></i>
                  <%= home.location %>
                </p>
                <div class="flex justify-between items-center mb-3">
                  <span class="text-lg md:text-xl font-extrabold text-red-500">Rs<%= home.price %> / night</span>
                  <div class="flex items-center">
                    <% const numericRating=Math.max(0, Math.min(5, parseFloat(home.rating || 0))); const
                      integerPart=Math.floor(numericRating); const roundedHalf=(numericRating===integerPart) ?
                      integerPart : Math.min(5, integerPart + 0.5); %>
                      <div
                        class="flex items-center gap-2 bg-yellow-50 border border-yellow-200 rounded-full px-2.5 py-1 shadow ring-1 ring-yellow-200 hover:shadow-md"
                        title="User rating: <%= numericRating %> / 5">
                        <img src="/ratings/rating-<%= roundedHalf %>.png" alt="Rating <%= roundedHalf %>"
                          class="h-5 w-auto" />
                        <span class="text-sm font-bold text-yellow-700 tabular-nums">
                          <%= roundedHalf %>
                        </span>
                        <span class="text-sm font-bold text-yellow-700 tabular-nums">/5</span>
                      </div>
                  </div>
                </div>
                <button
                  class="w-full bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-lg transition duration-200 shadow-sm hover:shadow-md">Book
                  Now</button>
              </div>
            </div>
            <% }) %>
        </div>
      </main>
  </body>

  </html>